"use strict";var _expression=_interopRequireDefault(require("./lib/expression")),_text=_interopRequireDefault(require("./lib/text")),_filterParser=_interopRequireDefault(require("./lib/filter-parser"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function trimhtml(e){if((e=e.replace(/^\s\s+/," ")).length<=1)return e;const t=" "===e.charAt(0)?1:0;return e.length-(e=e.trim()).length-t>=1&&(e+=" "),(t?" ":"")+e}function transExpr(expContent,toFunc){let ret;const trimExpContent=expContent.trim();if(_text.default.isExpr(trimExpContent)){ret=[];const tokens=_text.default.parseText(trimExpContent),isSingle=1===tokens.length;if(tokens.forEach((function(e){if(e.tag){let t=_expression.default.parseExpression((0,_filterParser.default)(e.value));isSingle||(t="("+t+")"),ret.push(t)}else ret.push("'"+e.value+"'")})),isSingle||ret.unshift("''"),ret=ret.join(" + "),!1!==toFunc)try{ret=eval("(function () {return "+ret+"})")}catch(e){throw e.isExpressionError=!0,e.expression=trimExpContent,e}}else ret=trimhtml(expContent);return ret}transExpr.isExpr=_text.default.isExpr,transExpr.singleExpr=_text.default.singleExpr,transExpr.removeExprffix=_text.default.removeExprffix,transExpr.addExprffix=_text.default.addExprffix,module.exports=transExpr;
//# sourceMappingURL=exp.js.map
